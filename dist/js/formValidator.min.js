"use strict";$(document).ready(function(){$("#loginReg").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"请输入6到18位字符"}}},password1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:18,message:"请输入6到18位字符"}}},password2:{validators:{notEmpty:{message:"请确认密码"},identical:{field:"password1",message:"两次密码输入不一致"}}},realname:{validators:{notEmpty:{message:"姓名不能为空"}}},mobile:{validators:{notEmpty:{message:"号码不能为空"},regexp:{regexp:/^[1][3,4,5,6,7,8,9][0-9]{9}$/,message:"请输入正确的手机格式"}}},isAgree:{validators:{notEmpty:{message:"请同意协议"}}}}}).on("success.form.bv",function(o){o.preventDefault();var e=$(o.target),a=(e.data("bootstrapValidator"),e.serialize());console.log(a),$.post("api/userAdd.php",a,function(o){if(o.isSuccess){$("#regLoginModal").modal("show"),$(".modal-title").text("注册提示"),$("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-ok'></span>"+o.msg+"&emsp;&emsp;&emsp;&emsp;等待 <span id='count'>5</span> 秒后自动跳转"),$("#btnskip").click(function(){location.href="login.php"});var e=5,a=setInterval(function(){e--,$("#count").text(e),0==e&&(clearInterval(a),location.href="login.php")},1e3)}else $("#regLoginModal").modal("show"),$(".modal-title").text("注册提示"),$("#regLoginModal .modal-body").html("注册失败")},"json")}),$("#checkLogin").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"请输入6到18位字符"}}},password1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:18,message:"请输入6到18位字符"}}}}}).on("success.form.bv",function(o){o.preventDefault();var e=$(o.target),a=(e.data("bootstrapValidator"),e.serialize());console.log("发送到后台的数据",a),$.post("api/checkLogin.php",a,function(o){if(console.log("后台返回",o),$("#regLoginModal .modal-title").text("用户登录提示"),o.isSuccess){$("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-ok'></span>"+o.msg+"等待 <span id='count'>5</span> 秒后自动跳转"),$("#regLoginModal").modal("show");var e=5,a=setInterval(function(){e--,$("#count").text(e),0==e&&(clearInterval(a),location.href="invest.php")},1e3)}else $("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-remove'></span>"+o.msg),$("#regLoginModal").modal("show"),console.log(o.msg)},"json")})});