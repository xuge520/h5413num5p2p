$(document).ready(function(){$("#registerform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:30,message:"用户名可以为6到30位"}}},password1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:30,message:"密码可以为6到30位"}}},password2:{validators:{notEmpty:{message:"确认密码不能为空"},identical:{field:"password1",message:"密码不一致"}}},realname:{validators:{notEmpty:{message:"姓名不能为空"}}},mobile:{validators:{notEmpty:{message:"电话号码不能为空"},regexp:{regexp:/^1\d{10}$/,message:"电话号码格式不正确"}}},regrules:{validators:{notEmpty:{message:"电话号码不能为空"}}}}}).on("success.form.bv",function(s){s.preventDefault();var a=$(s.target),e=(a.data("bootstrapValidator"),a.serialize());$.post("../../api/user-add.php",e,function(s){console.log(s),s.isSuccess?($(".modal-body").html('<p><span class="glyphicon glyphicon-ok text-success"></span><span>注册成功&emsp;<span><span id="count" class="text-danger">5</span>&emsp;秒后跳转到登录页面</p>'),$("#myModal").modal("show"),$("#quickjump").text("立即跳转").click(function(){clearInterval(e),window.location.href="./login.php"})):$(".modal-body").html('<p><span class="glyphicon glyphicon-remove text-danger"></span><span>失败&emsp;<span><span id="count" class="text-danger">5</span>&emsp;秒后回到注册页面</p>');var a=5,e=setInterval(function(){a--,$("#count").text(a),0===a&&(clearInterval(e),window.location.href="./login.php")},1e3)},"json")})});